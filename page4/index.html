
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      
        Blog - 
      
      Chouqin & Laoqi
    </title>
    
    <meta name="author" content="Qiping Li">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->


    <script src="/assets/themes/hooligan/js/jquery.min.js"></script>
    <script src="/assets/themes/hooligan/bootstrap/js/bootstrap.min.js"></script>

    <link href="/assets/themes/hooligan/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/hooligan/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">    
    <link rel="stylesheet" type="text/css" href="/assets/themes/hooligan/css-social-buttons/css/zocial.stripped.css" />
    <link href="/assets/themes/hooligan/css/pygments.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/hooligan/css/darkstrap.css" rel="stylesheet" type="text/css" media="all">    
    <link href="/assets/themes/hooligan/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    
    <!-- fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>      


          <a class="brand" href="/">Chouqin & Laoqi</a>


          <div class="nav-collapse">
            <ul class="nav">
              
              
              


  
    
      
      	
      	<li><a href="/about.html">About Me</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



            </ul>
            <ul class="nav pull-right social visible-desktop">
              <li class="divider-vertical"></li>
              
                <li>
                  <a href="https://www.github.com/chouqin" class="zocial github icon" target="_blank">
                    <span class="hidden-desktop">Github</a>
                  </a>
                </li>
              
                  
                                        
                         
                                  
              
              
                <li>
                  <a href="http://www.weibo.com/" class="zocial weibo icon" target="_blank">
                    <span class="hidden-desktop">Weibo</a>
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="content">
        <div class="row">
    <div class="span8" style="margin-top:20px;">
      <!--[> iterate through the posts on this page <]-->
      
        <div class="post">
          <h1><a href="/clrs/2012/12/12/clrs-14-15">红黑树扩充与动态规划</a></h1>
          <p class="meta">December 12, 2012</p>
            <!--<script type="text/javascript" src="/assets/custom/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>-->
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<h2 id="section">红黑树的扩充</h2>

<p>由于红黑树这种结构很好的平衡性（树的高度不会很高），
对于动态变化的集合插入，查找，删除等操作的复杂度都比较低，
通过给它的节点增加一些其他的属性，
能够得到一些在特定情况下很有用的数据结构。</p>

<h3 id="section-1">扩充数据结构的四个步骤</h3>

<ol>
  <li>选择基础的数据结构</li>
  <li>确定需要给数据结构添加哪些信息，
这些信息可能被添加到每个节点中，也可能被添加作为整体数据结构的性质</li>
  <li>验证在数据结构的基本操作的过程中，这些信息可以被有效的维护，
这里的有效是指不会因为维护这些信息增加基础操作的复杂度</li>
  <li>利用这些信息提供一些有用的操作</li>
</ol>

<h3 id="section-2">通过扩充红黑树得到顺序统计</h3>

<p>通过给红黑树的每一个节点x附加属性size[x]，
表示以x为根的子树的节点个数，
可以通过递归确定一棵红黑树的第i小关键字的元素。
由于包含n个元素的红黑树的高度为<script type="math/tex"> O(\lg n) </script>，每次递归高度都会下降一层，
所以查找第i小关键字的时间复杂度为<script type="math/tex"> O(\lg n) </script>。</p>

<p>在第9章中，给出了获取n个元素的数组中第i个元素的<script type="math/tex"> \Theta(n) </script>的算法，
而一个包含n个元素的数组如果是有序的话，那么获取第i个元素的复杂度是<script type="math/tex"> O(1) </script>。
但是这种扩充的数据结构的好处在于它的动态性，它的插入和删除的时间复杂度也是<script type="math/tex"> O(\lg n) </script>，
而一个有序数组的插入和删除的复杂度是<script type="math/tex"> O(n) </script>。</p>

<h3 id="section-3">通过扩充红黑树得到区间树</h3>

<p>在区间树中，每一个节点x包含了一段区间int[x]，同时包含了一个max[x]，
表示以x为根的子树中所有区间的右端点的最大值，同时每一个节点的key[x] = low[int[x]]，
也就是说是把每一个节点所包含区间的左端点作为key。</p>

<p>区间树使得查找整个红黑树中与某一个区间i重合的区间变得十分容易，
可以如下递归实现：</p>

<ol>
  <li>如果当前节点为空，返回空节点</li>
  <li>如果区间i与当前节点的区间重合，返回当前节点</li>
  <li>如果区间i的左端点小于当前节点左儿子的max，递归查找左子树</li>
  <li>否则递归查找右子树</li>
</ol>

<p>情况1，2很自然，情况4也比较好理解，
因为如果i的左端点大于左儿子的max，它就大于那么对于左子树中所有节点的右端点，
左子树中一定不存在和区间i重合区间。情况3需要一定的思考，
因为如果i的左端点小于当前节点左儿子的max，并不能保证它一定不会与右子树中的区间重合，
所以如果只是递归查找左子树，如果左子树中有区间和i重合，那么能够返回正确结果
（因为只需要找到一个和i重合的区间就可以），如果左子树中没有区间与i重合，
那右子树中可能会有区间与i重合，导致没有返回正确的结果。情况是这样的吗？</p>

<p>不是这样的，下面可以证明在情况3时如果左子树中没有找到与i重合的区间，
那么在右子树中也一定不存在和i重合的区间。</p>

<p>假设左儿子的max来自于high[j]（也就是说，是左子树中区间j的右端点)，
那么一定有</p>

<script type="math/tex; mode=display">% <![CDATA[
 
high[i] < low[j]
 %]]></script>

<p>否则区间i和j重合，对于右子树中的任意区间k，一定有</p>

<script type="math/tex; mode=display"> 
low[k] \geq low[j] > high[i] \text{第一个不等式成立是根据红黑树关键字的性质}
</script>

<p>所以k与i不重合。</p>

<h2 id="section-4">动态规划</h2>

<p class='more'><a href='/clrs/2012/12/12/clrs-14-15'>More...</a></p>
        </div>
      
        <div class="post">
          <h1><a href="/clrs/2012/12/04/clrs-10-13">《算法导论》之基本数据结构</a></h1>
          <p class="meta">December  4, 2012</p>
            <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script type="text/javascript">    
    MathJax.Hub.Config({    
        "HTML-CSS": { scale: 80}    
    });    
</script>

<!--<script type="text/javascript" src="/assets/custom/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>-->

<h2 id="section">散列表中碰撞的解决</h2>
<p>由于散列表的元素个数小于关键字的取值集合U,
因此会有两个不同的关键字映射到散列表的同一个槽上，
这时就发生了碰撞。发生了碰撞时，
书上给出了两种方法来解决，
而且保证此时的散列表平均情况下的查找复杂度是O(1)。</p>

<h3 id="section-1">链接法</h3>
<p>在链接法中，关键字映射到同一个槽上的元素通过一个链表来保存，
此时散列表T[0..m-1]的任意元素T[j]是一个链表，
当插入一个元素时，将元素放在它所对应的槽所指向链表的头部。
下面对链接法的性能进行分析。</p>

<p>定义散列表T的装载因子<script type="math/tex"> \alpha = n / m </script>, 其中n是元素个数，m是散列表槽数,
我们假设元素满足简单一致散列的条件：
任何元素散列到m个槽中的每一个的可能性是相同的。</p>

<p>用<script type="math/tex"> n_j </script>表示链表T[j]的长度，有
$$
E[n_j] = \alpha = n/m
$$</p>

<p>有如下性质成立：</p>

<ol>
  <li>
    <p>链接方式散列表在简单一致假设下，查找一个不存在元素所需时间的期望为<script type="math/tex"> \Theta (1 + \alpha) </script></p>

    <p>假设查找的元素是k, 它所对应的槽为h(k)，链表T[h(k)]的长度<script type="math/tex"> E[n_{h(k)}] = \alpha </script>，
 所以平均情况下需要遍历一个长度为<script type="math/tex"> \alpha </script>的链表，外加常数的散列函数时间和寻址T[h(k)]的时间，
 总共为<script type="math/tex"> \Theta (1 + \alpha) </script></p>
  </li>
  <li>
    <p>链接方式散列表在简单一致假设下，平均查找一个已存在的元素所需的时间为<script type="math/tex"> \Theta (1 + \alpha) </script></p>

    <p>对于任意元素x，检查的元素个数等于x所在链表中，出现在x之前的元素个数加1。
 设<script type="math/tex"> x_i </script>是第i个插入的元素，i=1,2,..,n,
 定义：</p>

    <script type="math/tex; mode=display">% <![CDATA[

     X_{ij} =
      \begin{cases}
          1 & x_i\text{和}x_j\text{在同一槽中} \\
          0 & \text{否则}
      \end{cases}
  %]]></script>

    <p>由简单一致性假设，<script type="math/tex"> E[X_{ij}] = 1/m </script>，所以检查元素个数的期望为：</p>

    <script type="math/tex; mode=display">% <![CDATA[

 \begin{array} {lcl}
 E[\frac{1}{n} \sum_{i=1}^{n} (1 + \sum_{j=0}^{i-1}X_{ij})]
     &=& 1 + \frac{n-1}{2m} \\
     &=& 1 + \frac{\alpha}{2} - \frac{\alpha}{2n}
 \end{array}
  %]]></script>

    <p>所以平均查找时间为: <script type="math/tex"> \Theta (2 + \frac{\alpha}{2} - \frac{\alpha}{2n}) = \Theta (1 + \alpha) </script></p>
  </li>
</ol>

<p class='more'><a href='/clrs/2012/12/04/clrs-10-13'>More...</a></p>
        </div>
      

      <!--[> links to prev and next pages for browsing thru archives <]-->
      
        <span id="newer"><a href="/page3">&laquo;&laquo; Newer Entries</a></span>
      
      
        <span id="older"><a href="/page5">Older Entries &raquo;&raquo;</a></span>
      

    </div>

    <div class="span4" style="margin-top:20px;">
        <h3>所有分类</h3>
        <ul class="categories">
        
        <li><a href="/categories/linux">linux <span> 1 </span></a></li>
        
        <li><a href="/categories/feelings">feelings <span> 3 </span></a></li>
        
        <li><a href="/categories/python">python <span> 1 </span></a></li>
        
        <li><a href="/categories/mysql">mysql <span> 1 </span></a></li>
        
        <li><a href="/categories/clrs">clrs <span> 7 </span></a></li>
        
        <li><a href="/categories/tools">tools <span> 1 </span></a></li>
        
        </ul>
    </div>
</div>


      </div>

      <footer>
        <p>&copy; Qiping Li 2012 
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://github.com/dhulihan/hooligan" target="_blank">The Hooligan Theme</a>
        </p>
      </footer>
    </div> <!-- /container -->
    
  </body>
</html>

